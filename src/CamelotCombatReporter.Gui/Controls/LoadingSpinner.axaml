<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="100" d:DesignHeight="100"
             x:Class="CamelotCombatReporter.Gui.Controls.LoadingSpinner"
             x:Name="Root">

    <UserControl.Styles>
        <Style Selector="Ellipse.SpinnerArc">
            <Style.Animations>
                <Animation Duration="0:0:1" IterationCount="Infinite">
                    <KeyFrame Cue="0%">
                        <Setter Property="RotateTransform.Angle" Value="0"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="RotateTransform.Angle" Value="360"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
    </UserControl.Styles>

    <Grid>
        <!-- Background circle (track) -->
        <Ellipse Width="{Binding Size, ElementName=Root}"
                 Height="{Binding Size, ElementName=Root}"
                 Stroke="{Binding TrackBrush, ElementName=Root}"
                 StrokeThickness="{Binding StrokeThickness, ElementName=Root}"
                 Fill="Transparent"/>

        <!-- Spinning arc -->
        <Ellipse Classes="SpinnerArc"
                 Width="{Binding Size, ElementName=Root}"
                 Height="{Binding Size, ElementName=Root}"
                 Stroke="{Binding SpinnerBrush, ElementName=Root}"
                 StrokeThickness="{Binding StrokeThickness, ElementName=Root}"
                 StrokeDashArray="2.5,1.5"
                 Fill="Transparent"
                 RenderTransformOrigin="0.5,0.5">
            <Ellipse.RenderTransform>
                <RotateTransform/>
            </Ellipse.RenderTransform>
        </Ellipse>
    </Grid>
</UserControl>
