# 1. Log Parsing

## Status: âœ… Complete

**Implementation Location:** `src/parser/`

**Key Components:**
- `LogParser` - Main parser class with line-by-line and streaming parsing
- `Tokenizer` - Lexical analysis and token generation
- `handlers/` - Event-specific parsing handlers for all combat event types
- Support for damage, healing, deaths, styles, spells, crowd control, and more

**Test Coverage:** Comprehensive unit tests in `tests/unit/parser/`

---

## Description

The core functionality of the DAoC Log Parser is to read and parse the combat logs generated by the Dark Age of Camelot client. These logs are plain text files that capture all combat-related events in a specific format. The parser needs to be able to handle different log file formats (e.g., `chat.log`, `combat.log`) and extract meaningful information from each line.

## Functionality

*   **Log File Detection:** Automatically detect and select the correct log file to parse. This could be based on file naming conventions or user selection.
*   **Line-by-Line Parsing:** Process the log file line by line, identifying the type of event each line represents (e.g., damage dealt, damage received, healing, crowd control effects).
*   **Data Extraction:** Extract key data points from each log entry, such as:
    *   Timestamp
    *   Source and target of the action
    *   Action type (e.g., melee, spell, style)
    *   Damage amount and type (e.g., crush, slash, heat, cold)
    *   Healing amount
    *   Crowd control effect and duration
*   **Error Handling:** Gracefully handle malformed or unexpected log entries, logging errors without crashing the parser.

## Requirements

*   **Programming Language:** A language with strong string manipulation capabilities (e.g., Python with regular expressions, C#).
*   **Log Format Knowledge:** A comprehensive understanding of the DAoC log file format, including all possible event types and their variations. This may require community-sourced information or extensive testing.

## Limitations

*   The parser will be limited by the information available in the log files. Any event not logged by the game client cannot be parsed.
*   Changes to the log format in future game updates will require updates to the parser.

## Dependencies

*   None for the core parsing logic. However, it will be a dependency for all other features in this roadmap.
